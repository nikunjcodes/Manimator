2025-06-10 19:45:32,155 - app - INFO - ManimAI application started - Log level: INFO
2025-06-10 19:53:20,426 - app - INFO - ManimAI application started - Log level: INFO
2025-06-10 19:53:21,996 - services.database_service - INFO - Database indexes created successfully
2025-06-10 19:53:21,996 - services.database_service - INFO - Database connection established successfully
2025-06-10 19:53:21,997 - services.gemini_service - INFO - Gemini service initialized successfully
2025-06-10 19:53:21,997 - services.manim_service - INFO - Manim service initialized with quality: medium_quality
2025-06-10 19:53:21,997 - services.cloudinary_service - INFO - Cloudinary service initialized successfully
2025-06-10 19:53:22,013 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.8:5000
2025-06-10 19:53:22,013 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-10 19:53:37,933 - services.gemini_service - ERROR - Gemini health check failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-06-10 19:53:37,934 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 19:53:37] "GET /api/health HTTP/1.1" 200 -
2025-06-10 19:53:37,979 - middleware.error_handlers - WARNING - Resource not found: http://localhost:5000/favicon.ico
2025-06-10 19:53:37,979 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 19:53:37] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-10 19:54:57,443 - app - INFO - ManimAI application started - Log level: INFO
2025-06-10 19:54:58,884 - services.database_service - INFO - Database indexes created successfully
2025-06-10 19:54:58,884 - services.database_service - INFO - Database connection established successfully
2025-06-10 19:54:58,884 - services.gemini_service - INFO - Gemini service initialized successfully
2025-06-10 19:54:58,884 - services.manim_service - INFO - Manim service initialized with quality: medium_quality
2025-06-10 19:54:58,884 - services.cloudinary_service - INFO - Cloudinary service initialized successfully
2025-06-10 19:54:58,897 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.8:5000
2025-06-10 19:54:58,898 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-10 19:55:05,688 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 19:55:05] "GET /api/health HTTP/1.1" 200 -
2025-06-10 19:55:05,708 - middleware.error_handlers - WARNING - Resource not found: http://localhost:5000/favicon.ico
2025-06-10 19:55:05,708 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 19:55:05] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-10 19:57:23,998 - middleware.error_handlers - WARNING - Resource not found: http://localhost:5000/api/register
2025-06-10 19:57:23,999 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 19:57:23] "[33mGET /api/register HTTP/1.1[0m" 404 -
2025-06-10 19:57:24,022 - middleware.error_handlers - WARNING - Resource not found: http://localhost:5000/favicon.ico
2025-06-10 19:57:24,023 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 19:57:24] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-10 19:58:18,852 - services.database_service - INFO - User created with ID: 68484102281cceb43bef53b1
2025-06-10 19:58:18,853 - routes.auth_routes - ERROR - Registration error: '_id'
2025-06-10 19:58:18,854 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 19:58:18] "[35m[1mPOST /api/auth/register HTTP/1.1[0m" 500 -
2025-06-10 19:58:54,591 - services.auth_service - WARNING - Registration validation error: User with this email already exists
2025-06-10 19:58:54,592 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 19:58:54] "[31m[1mPOST /api/auth/register HTTP/1.1[0m" 400 -
2025-06-10 19:59:56,718 - routes.auth_routes - ERROR - Login error: '_id'
2025-06-10 19:59:56,719 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 19:59:56] "[35m[1mPOST /api/auth/login HTTP/1.1[0m" 500 -
2025-06-10 20:02:25,236 - app - INFO - ManimAI application started - Log level: INFO
2025-06-10 20:02:25,236 - services.database_service - INFO - Attempting to connect to MongoDB at: mongodb+srv://nikunj:mongo123@cluster0.rf2xhnp.mongodb.net/
2025-06-10 20:02:25,236 - services.database_service - INFO - Using database: manimai
2025-06-10 20:02:25,977 - services.database_service - INFO - Successfully connected to MongoDB
2025-06-10 20:02:26,005 - services.database_service - INFO - Available databases: ['ai-lab', 'blog', 'cities', 'manimai', 'manimation', 'mongodemo', 'mongoseries', 'nikunj', 'test', 'trackyourmoney', 'admin', 'local']
2025-06-10 20:02:26,699 - services.database_service - INFO - Database indexes created successfully
2025-06-10 20:02:26,700 - services.database_service - INFO - Database connection established successfully
2025-06-10 20:02:26,700 - services.gemini_service - INFO - Gemini service initialized successfully
2025-06-10 20:02:26,700 - services.manim_service - INFO - Manim service initialized with quality: medium_quality
2025-06-10 20:02:26,701 - services.cloudinary_service - INFO - Cloudinary service initialized successfully
2025-06-10 20:02:26,713 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.8:5000
2025-06-10 20:02:26,713 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-10 20:03:31,061 - app - INFO - ManimAI application started - Log level: INFO
2025-06-10 20:03:31,062 - services.database_service - INFO - Attempting to connect to MongoDB at: mongodb+srv://nikunj:mongo123@cluster0.rf2xhnp.mongodb.net/
2025-06-10 20:03:31,062 - services.database_service - INFO - Using database: manimation
2025-06-10 20:03:36,787 - services.database_service - INFO - Successfully connected to MongoDB
2025-06-10 20:03:36,813 - services.database_service - INFO - Available databases: ['ai-lab', 'blog', 'cities', 'manimai', 'manimation', 'mongodemo', 'mongoseries', 'nikunj', 'test', 'trackyourmoney', 'admin', 'local']
2025-06-10 20:03:37,841 - services.database_service - INFO - Database indexes created successfully
2025-06-10 20:03:37,841 - services.database_service - INFO - Database connection established successfully
2025-06-10 20:03:37,842 - services.gemini_service - INFO - Gemini service initialized successfully
2025-06-10 20:03:37,842 - services.manim_service - INFO - Manim service initialized with quality: medium_quality
2025-06-10 20:03:37,842 - services.cloudinary_service - INFO - Cloudinary service initialized successfully
2025-06-10 20:03:37,852 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.8:5000
2025-06-10 20:03:37,852 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-10 20:03:43,350 - services.database_service - INFO - User created with ID: 6848424792c5d56910b58e10
2025-06-10 20:03:43,351 - routes.auth_routes - ERROR - Registration error: '_id'
2025-06-10 20:03:43,352 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:03:43] "[35m[1mPOST /api/auth/register HTTP/1.1[0m" 500 -
2025-06-10 20:05:40,085 - app - INFO - ManimAI application started - Log level: INFO
2025-06-10 20:05:40,086 - services.database_service - INFO - Attempting to connect to MongoDB at: mongodb+srv://nikunj:mongo123@cluster0.rf2xhnp.mongodb.net/
2025-06-10 20:05:40,086 - services.database_service - INFO - Using database: manimation
2025-06-10 20:05:40,801 - services.database_service - INFO - Successfully connected to MongoDB
2025-06-10 20:05:40,833 - services.database_service - INFO - Available databases: ['ai-lab', 'blog', 'cities', 'manimai', 'manimation', 'mongodemo', 'mongoseries', 'nikunj', 'test', 'trackyourmoney', 'admin', 'local']
2025-06-10 20:05:41,588 - services.database_service - INFO - Database indexes created successfully
2025-06-10 20:05:41,588 - services.database_service - INFO - Database connection established successfully
2025-06-10 20:05:41,588 - services.gemini_service - INFO - Gemini service initialized successfully
2025-06-10 20:05:41,589 - services.gemini_service - INFO - Gemini api key :AIzaSyCggp87Qc8fLuYovaPQe56scn8EHOvhWJk
2025-06-10 20:05:41,589 - services.manim_service - INFO - Manim service initialized with quality: medium_quality
2025-06-10 20:05:41,589 - services.cloudinary_service - INFO - Cloudinary service initialized successfully
2025-06-10 20:05:41,602 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.8:5000
2025-06-10 20:05:41,602 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-10 20:06:14,065 - services.auth_service - INFO - Starting user registration for email: test@example.com
2025-06-10 20:06:14,087 - services.auth_service - WARNING - Registration attempted with existing email: test@example.com
2025-06-10 20:06:14,087 - services.auth_service - WARNING - Registration validation error: User with this email already exists
2025-06-10 20:06:14,087 - routes.auth_routes - WARNING - Registration value error: User with this email already exists
2025-06-10 20:06:14,088 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:06:14] "[31m[1mPOST /api/auth/register HTTP/1.1[0m" 400 -
2025-06-10 20:06:28,613 - services.auth_service - INFO - Starting user registration for email: test2@example.com
2025-06-10 20:06:28,633 - services.auth_service - INFO - Hashing password
2025-06-10 20:06:28,845 - services.auth_service - INFO - Creating user in database
2025-06-10 20:06:28,877 - services.database_service - INFO - User created with ID: 684842ece8fda5547ddfcf4d
2025-06-10 20:06:28,877 - services.auth_service - INFO - User created with ID: 684842ece8fda5547ddfcf4d
2025-06-10 20:06:28,877 - services.auth_service - INFO - Generating tokens
2025-06-10 20:06:28,878 - services.auth_service - INFO - Tokens generated successfully
2025-06-10 20:06:28,908 - services.auth_service - INFO - Registration completed successfully
2025-06-10 20:06:28,909 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:06:28] "[35m[1mPOST /api/auth/register HTTP/1.1[0m" 201 -
2025-06-10 20:06:36,369 - routes.auth_routes - ERROR - Login error: '_id'
2025-06-10 20:06:36,370 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:06:36] "[35m[1mPOST /api/auth/login HTTP/1.1[0m" 500 -
2025-06-10 20:06:49,148 - routes.auth_routes - ERROR - Login error: '_id'
2025-06-10 20:06:49,148 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:06:49] "[35m[1mPOST /api/auth/login HTTP/1.1[0m" 500 -
2025-06-10 20:07:58,367 - routes.auth_routes - ERROR - Login error: '_id'
2025-06-10 20:07:58,368 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:07:58] "[35m[1mPOST /api/auth/login HTTP/1.1[0m" 500 -
2025-06-10 20:08:02,740 - app - INFO - ManimAI application started - Log level: INFO
2025-06-10 20:08:02,742 - services.database_service - INFO - Attempting to connect to MongoDB at: mongodb+srv://nikunj:mongo123@cluster0.rf2xhnp.mongodb.net/
2025-06-10 20:08:02,742 - services.database_service - INFO - Using database: manimation
2025-06-10 20:08:03,478 - services.database_service - INFO - Successfully connected to MongoDB
2025-06-10 20:08:03,511 - services.database_service - INFO - Available databases: ['ai-lab', 'blog', 'cities', 'manimai', 'manimation', 'mongodemo', 'mongoseries', 'nikunj', 'test', 'trackyourmoney', 'admin', 'local']
2025-06-10 20:08:04,282 - services.database_service - INFO - Database indexes created successfully
2025-06-10 20:08:04,282 - services.database_service - INFO - Database connection established successfully
2025-06-10 20:08:04,282 - services.gemini_service - INFO - Gemini service initialized successfully
2025-06-10 20:08:04,282 - services.gemini_service - INFO - Gemini api key :AIzaSyCggp87Qc8fLuYovaPQe56scn8EHOvhWJk
2025-06-10 20:08:04,282 - services.manim_service - INFO - Manim service initialized with quality: medium_quality
2025-06-10 20:08:04,282 - services.cloudinary_service - INFO - Cloudinary service initialized successfully
2025-06-10 20:08:04,294 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.8:5000
2025-06-10 20:08:04,294 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-10 20:08:13,266 - routes.auth_routes - ERROR - Login error: '_id'
Traceback (most recent call last):
  File "/home/nikunj/Projects/manim-animation-generator/backend/routes/auth_routes.py", line 96, in login
    'id': result['user']['_id'],
          ~~~~~~~~~~~~~~^^^^^^^
KeyError: '_id'
2025-06-10 20:08:13,268 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:08:13] "[35m[1mPOST /api/auth/login HTTP/1.1[0m" 500 -
2025-06-10 20:13:02,549 - app - INFO - ManimAI application started - Log level: INFO
2025-06-10 20:13:02,550 - services.database_service - INFO - Attempting to connect to MongoDB at: mongodb+srv://nikunj:mongo123@cluster0.rf2xhnp.mongodb.net/
2025-06-10 20:13:02,550 - services.database_service - INFO - Using database: manimation
2025-06-10 20:13:03,211 - services.database_service - INFO - Successfully connected to MongoDB
2025-06-10 20:13:03,238 - services.database_service - INFO - Available databases: ['ai-lab', 'blog', 'cities', 'manimai', 'manimation', 'mongodemo', 'mongoseries', 'nikunj', 'test', 'trackyourmoney', 'admin', 'local']
2025-06-10 20:13:03,957 - services.database_service - INFO - Database indexes created successfully
2025-06-10 20:13:03,957 - services.database_service - INFO - Database connection established successfully
2025-06-10 20:13:03,957 - services.gemini_service - INFO - Gemini service initialized successfully
2025-06-10 20:13:03,957 - services.gemini_service - INFO - Gemini api key :AIzaSyCggp87Qc8fLuYovaPQe56scn8EHOvhWJk
2025-06-10 20:13:03,957 - services.manim_service - INFO - Manim service initialized with quality: medium_quality
2025-06-10 20:13:03,957 - services.cloudinary_service - INFO - Cloudinary service initialized successfully
2025-06-10 20:13:03,969 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.8:5000
2025-06-10 20:13:03,969 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-10 20:13:06,710 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:13:06] "POST /api/auth/login HTTP/1.1" 200 -
2025-06-10 20:28:18,873 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:28:18] "OPTIONS /api/auth/register HTTP/1.1" 200 -
2025-06-10 20:28:18,942 - services.auth_service - INFO - Starting user registration for email: nik@gmail.com
2025-06-10 20:28:18,967 - services.auth_service - INFO - Hashing password
2025-06-10 20:28:19,185 - services.auth_service - INFO - Creating user in database
2025-06-10 20:28:19,224 - services.database_service - INFO - User created with ID: 6848480bdd8ac121b3ecb179
2025-06-10 20:28:19,225 - services.auth_service - INFO - User created with ID: 6848480bdd8ac121b3ecb179
2025-06-10 20:28:19,225 - services.auth_service - INFO - Generating tokens
2025-06-10 20:28:19,225 - services.auth_service - INFO - Tokens generated successfully
2025-06-10 20:28:19,247 - services.auth_service - INFO - Registration completed successfully
2025-06-10 20:28:19,248 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:28:19] "[35m[1mPOST /api/auth/register HTTP/1.1[0m" 201 -
2025-06-10 20:28:40,655 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:28:40] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-06-10 20:28:40,972 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:28:40] "POST /api/auth/login HTTP/1.1" 200 -
2025-06-10 20:29:42,430 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:29:42] "OPTIONS /api/auth/validate HTTP/1.1" 200 -
2025-06-10 20:29:42,433 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:29:42] "[31m[1mGET /api/auth/validate HTTP/1.1[0m" 401 -
2025-06-10 20:29:42,436 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:29:42] "[31m[1mGET /api/auth/validate HTTP/1.1[0m" 401 -
2025-06-10 20:32:56,735 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:32:56] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-06-10 20:32:57,009 - services.auth_service - WARNING - Login validation error: Invalid email or password
2025-06-10 20:32:57,009 - routes.auth_routes - WARNING - Login value error: Invalid email or password
2025-06-10 20:32:57,010 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:32:57] "[31m[1mPOST /api/auth/login HTTP/1.1[0m" 401 -
2025-06-10 20:33:01,838 - services.auth_service - WARNING - Login validation error: Invalid email or password
2025-06-10 20:33:01,854 - routes.auth_routes - WARNING - Login value error: Invalid email or password
2025-06-10 20:33:01,854 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:33:01] "[31m[1mPOST /api/auth/login HTTP/1.1[0m" 401 -
2025-06-10 20:33:05,714 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:33:05] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-06-10 20:33:06,038 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:33:06] "POST /api/auth/login HTTP/1.1" 200 -
2025-06-10 20:33:06,072 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:33:06] "OPTIONS /api/chat/history HTTP/1.1" 200 -
2025-06-10 20:33:06,077 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:33:06] "[31m[1mGET /api/chat/history HTTP/1.1[0m" 401 -
2025-06-10 20:33:21,093 - middleware.error_handlers - WARNING - Resource not found: http://localhost:5000/api/generate
2025-06-10 20:33:21,094 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:33:21] "[33mOPTIONS /api/generate HTTP/1.1[0m" 404 -
2025-06-10 20:37:54,135 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:37:54] "OPTIONS /api/auth/validate HTTP/1.1" 200 -
2025-06-10 20:37:54,137 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:37:54] "OPTIONS /api/auth/validate HTTP/1.1" 200 -
2025-06-10 20:37:54,138 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:37:54] "[31m[1mGET /api/auth/validate HTTP/1.1[0m" 401 -
2025-06-10 20:37:54,142 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 20:37:54] "[31m[1mGET /api/auth/validate HTTP/1.1[0m" 401 -
2025-06-10 21:01:53,073 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 21:01:53] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-06-10 21:01:53,099 - services.auth_service - WARNING - Login validation error: Invalid email or password
2025-06-10 21:01:53,099 - routes.auth_routes - WARNING - Login value error: Invalid email or password
2025-06-10 21:01:53,099 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 21:01:53] "[31m[1mPOST /api/auth/login HTTP/1.1[0m" 401 -
2025-06-10 21:03:37,649 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 21:03:37] "POST /api/auth/login HTTP/1.1" 200 -
2025-06-10 21:04:04,722 - middleware.error_handlers - WARNING - Resource not found: http://localhost:5000/generate-code
2025-06-10 21:04:04,723 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 21:04:04] "[33mPOST /generate-code HTTP/1.1[0m" 404 -
2025-06-10 21:04:51,317 - middleware.error_handlers - WARNING - Resource not found: http://localhost:5000/api/generate-code
2025-06-10 21:04:51,317 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 21:04:51] "[33mPOST /api/generate-code HTTP/1.1[0m" 404 -
2025-06-10 21:04:58,515 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 21:04:58] "[31m[1mPOST /api/chat/generate-code HTTP/1.1[0m" 401 -
2025-06-10 21:05:18,101 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 21:05:18] "POST /api/auth/login HTTP/1.1" 200 -
2025-06-10 21:05:46,966 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 21:05:46] "[31m[1mPOST /api/chat/generate-code HTTP/1.1[0m" 401 -
2025-06-10 21:05:59,416 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 21:05:59] "[31m[1mPOST /api/chat/generate-code HTTP/1.1[0m" 401 -
2025-06-10 21:20:49,735 - app - INFO - ManimAI application started - Log level: INFO
2025-06-10 21:22:07,727 - app - INFO - ManimAI application started - Log level: INFO
2025-06-10 21:22:08,413 - services.gemini_service - INFO - Gemini service initialized successfully
2025-06-10 21:22:08,414 - services.gemini_service - INFO - Gemini api key :AIzaSyCggp87Qc8fLuYovaPQe56scn8EHOvhWJk
2025-06-10 21:22:08,414 - services.cloudinary_service - INFO - Cloudinary service initialized successfully
2025-06-10 21:23:04,077 - app - INFO - ManimAI application started - Log level: INFO
2025-06-10 21:23:04,671 - services.gemini_service - INFO - Gemini service initialized successfully
2025-06-10 21:23:04,671 - services.gemini_service - INFO - Gemini api key :AIzaSyCggp87Qc8fLuYovaPQe56scn8EHOvhWJk
2025-06-10 21:23:04,671 - services.cloudinary_service - INFO - Cloudinary service initialized successfully
2025-06-10 21:23:04,687 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.8:5000
2025-06-10 21:23:04,688 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-10 21:23:12,065 - __main__ - INFO - Request: POST /api/auth/login from 127.0.0.1
2025-06-10 21:23:12,085 - services.auth_service - WARNING - Login validation error: Invalid email or password
2025-06-10 21:23:12,085 - routes.auth_routes - WARNING - Login value error: Invalid email or password
2025-06-10 21:23:12,085 - __main__ - INFO - Response: 401 UNAUTHORIZED for POST /api/auth/login
2025-06-10 21:23:12,105 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 21:23:12] "[31m[1mPOST /api/auth/login HTTP/1.1[0m" 401 -
2025-06-10 21:23:30,614 - __main__ - INFO - Request: POST /api/auth/register from 127.0.0.1
2025-06-10 21:23:30,615 - services.auth_service - INFO - Starting user registration for email: test3@example.com
2025-06-10 21:23:30,615 - services.database_service - ERROR - Error getting user by email: Cannot use MongoClient after close
2025-06-10 21:23:30,615 - services.auth_service - ERROR - User registration failed: Cannot use MongoClient after close
Traceback (most recent call last):
  File "/home/nikunj/Projects/manim-animation-generator/backend/services/auth_service.py", line 123, in register_user
    existing_user = self.db.get_user_by_email(email)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/services/database_service.py", line 45, in get_user_by_email
    user = self.users.find_one({'email': email})
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/collection.py", line 1506, in find_one
    for result in cursor.limit(-1):
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/cursor.py", line 1264, in next
    if len(self.__data) or self._refresh():
                           ^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/cursor.py", line 1181, in _refresh
    self.__send_message(q)
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/cursor.py", line 1060, in __send_message
    response = client._run_operation(
               ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/_csot.py", line 107, in csot_wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/mongo_client.py", line 1394, in _run_operation
    return self._retryable_read(
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/mongo_client.py", line 1492, in _retryable_read
    return self._retry_internal(
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/_csot.py", line 107, in csot_wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/mongo_client.py", line 1462, in _retry_internal
    ).run()
      ^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/mongo_client.py", line 2315, in run
    return self._read() if self._is_read else self._write()
           ^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/mongo_client.py", line 2437, in _read
    self._server = self._get_server()
                   ^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/mongo_client.py", line 2400, in _get_server
    return self._client._select_server(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/mongo_client.py", line 1292, in _select_server
    topology = self._get_topology()
               ^^^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/mongo_client.py", line 1238, in _get_topology
    self._topology.open()
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/topology.py", line 201, in open
    self._ensure_opened()
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/topology.py", line 627, in _ensure_opened
    raise InvalidOperation("Cannot use MongoClient after close")
pymongo.errors.InvalidOperation: Cannot use MongoClient after close
2025-06-10 21:23:30,621 - routes.auth_routes - ERROR - Registration error: Cannot use MongoClient after close
Traceback (most recent call last):
  File "/home/nikunj/Projects/manim-animation-generator/backend/routes/auth_routes.py", line 51, in register
    result = auth_service.register_user(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/services/auth_service.py", line 123, in register_user
    existing_user = self.db.get_user_by_email(email)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/services/database_service.py", line 45, in get_user_by_email
    user = self.users.find_one({'email': email})
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/collection.py", line 1506, in find_one
    for result in cursor.limit(-1):
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/cursor.py", line 1264, in next
    if len(self.__data) or self._refresh():
                           ^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/cursor.py", line 1181, in _refresh
    self.__send_message(q)
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/cursor.py", line 1060, in __send_message
    response = client._run_operation(
               ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/_csot.py", line 107, in csot_wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/mongo_client.py", line 1394, in _run_operation
    return self._retryable_read(
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/mongo_client.py", line 1492, in _retryable_read
    return self._retry_internal(
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/_csot.py", line 107, in csot_wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/mongo_client.py", line 1462, in _retry_internal
    ).run()
      ^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/mongo_client.py", line 2315, in run
    return self._read() if self._is_read else self._write()
           ^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/mongo_client.py", line 2437, in _read
    self._server = self._get_server()
                   ^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/mongo_client.py", line 2400, in _get_server
    return self._client._select_server(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/mongo_client.py", line 1292, in _select_server
    topology = self._get_topology()
               ^^^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/mongo_client.py", line 1238, in _get_topology
    self._topology.open()
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/topology.py", line 201, in open
    self._ensure_opened()
  File "/home/nikunj/Projects/manim-animation-generator/backend/venv/lib/python3.12/site-packages/pymongo/topology.py", line 627, in _ensure_opened
    raise InvalidOperation("Cannot use MongoClient after close")
pymongo.errors.InvalidOperation: Cannot use MongoClient after close
2025-06-10 21:23:30,622 - __main__ - INFO - Response: 500 INTERNAL SERVER ERROR for POST /api/auth/register
2025-06-10 21:23:30,623 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 21:23:30] "[35m[1mPOST /api/auth/register HTTP/1.1[0m" 500 -
2025-06-10 21:25:05,278 - app - INFO - ManimAI application started - Log level: INFO
2025-06-10 21:25:05,577 - services.database_service - ERROR - Database connection error: No default database defined
2025-06-10 21:25:43,903 - app - INFO - ManimAI application started - Log level: INFO
2025-06-10 21:26:15,288 - app - INFO - ManimAI application started - Log level: INFO
2025-06-10 21:27:19,507 - app - INFO - ManimAI application started - Log level: INFO
2025-06-10 21:27:21,922 - services.database_service - INFO - Database indexes created successfully
2025-06-10 21:27:21,922 - services.database_service - INFO - Database connection established successfully
2025-06-10 21:27:21,922 - services.gemini_service - INFO - Gemini service initialized successfully
2025-06-10 21:27:21,923 - services.gemini_service - INFO - Gemini api key :AIzaSyCggp87Qc8fLuYovaPQe56scn8EHOvhWJk
2025-06-10 21:29:31,254 - app - INFO - ManimAI application started - Log level: INFO
2025-06-10 21:29:59,431 - app - INFO - ManimAI application started - Log level: INFO
2025-06-10 21:30:01,579 - services.database_service - INFO - Database indexes created successfully
2025-06-10 21:30:01,580 - services.database_service - INFO - Database connection established successfully
2025-06-10 21:30:01,580 - services.cloudinary_service - INFO - Cloudinary service initialized successfully
2025-06-10 21:30:01,580 - services.gemini_service - INFO - Gemini service initialized successfully
2025-06-10 21:30:01,580 - services.gemini_service - INFO - Gemini api key :AIzaSyCggp87Qc8fLuYovaPQe56scn8EHOvhWJk
2025-06-10 21:30:01,598 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.8:5000
2025-06-10 21:30:01,598 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-10 21:30:07,492 - services.auth_service - INFO - Starting user registration for email: test3@example.com
2025-06-10 21:30:07,513 - services.auth_service - INFO - Hashing password
2025-06-10 21:30:07,759 - services.auth_service - INFO - Creating user in database
2025-06-10 21:30:07,787 - services.database_service - INFO - User created with ID: 68485687a781ff8d388e1b33
2025-06-10 21:30:07,787 - services.auth_service - INFO - User created with ID: 68485687a781ff8d388e1b33
2025-06-10 21:30:07,787 - services.auth_service - INFO - Generating tokens
2025-06-10 21:30:07,787 - services.auth_service - ERROR - Token generation failed: 'DatabaseService' object has no attribute 'store_token'
2025-06-10 21:30:07,787 - services.auth_service - ERROR - User registration failed: 'DatabaseService' object has no attribute 'store_token'
Traceback (most recent call last):
  File "/home/nikunj/Projects/manim-animation-generator/backend/services/auth_service.py", line 151, in register_user
    tokens = self.generate_tokens(user_id, email)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/services/auth_service.py", line 69, in generate_tokens
    self.db.store_token(refresh_jti, refresh_payload['exp'])
    ^^^^^^^^^^^^^^^^^^^
AttributeError: 'DatabaseService' object has no attribute 'store_token'. Did you mean: 'revoke_token'?
2025-06-10 21:30:07,788 - routes.auth_routes - ERROR - Registration error: 'DatabaseService' object has no attribute 'store_token'
Traceback (most recent call last):
  File "/home/nikunj/Projects/manim-animation-generator/backend/routes/auth_routes.py", line 51, in register
    result = auth_service.register_user(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/services/auth_service.py", line 151, in register_user
    tokens = self.generate_tokens(user_id, email)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nikunj/Projects/manim-animation-generator/backend/services/auth_service.py", line 69, in generate_tokens
    self.db.store_token(refresh_jti, refresh_payload['exp'])
    ^^^^^^^^^^^^^^^^^^^
AttributeError: 'DatabaseService' object has no attribute 'store_token'. Did you mean: 'revoke_token'?
2025-06-10 21:30:07,790 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 21:30:07] "[35m[1mPOST /api/auth/register HTTP/1.1[0m" 500 -
2025-06-10 21:31:05,840 - app - INFO - ManimAI application started - Log level: INFO
2025-06-10 21:31:06,918 - services.database_service - ERROR - Failed to create database indexes: Index build failed: b20a722a-fc58-4033-884e-346cc057dc04: Collection manimai.users ( 95966b69-9771-4085-8b83-6d64926c9695 ) :: caused by :: E11000 duplicate key error collection: manimai.users index: username_1 dup key: { username: null }, full error: {'ok': 0.0, 'errmsg': 'Index build failed: b20a722a-fc58-4033-884e-346cc057dc04: Collection manimai.users ( 95966b69-9771-4085-8b83-6d64926c9695 ) :: caused by :: E11000 duplicate key error collection: manimai.users index: username_1 dup key: { username: null }', 'code': 11000, 'codeName': 'DuplicateKey', 'keyPattern': {'username': 1}, 'keyValue': {'username': None}, '$clusterTime': {'clusterTime': Timestamp(1749571266, 21), 'signature': {'hash': b'\xfa\xe1\x13\xfa\x9e\x9d|=\t=CKv\xd2};t\xc0\nC', 'keyId': 7448996999631732743}}, 'operationTime': Timestamp(1749571266, 20)}
2025-06-10 21:31:06,918 - services.database_service - INFO - Database connection established successfully
2025-06-10 21:31:06,919 - services.cloudinary_service - INFO - Cloudinary service initialized successfully
2025-06-10 21:31:06,919 - services.gemini_service - INFO - Gemini service initialized successfully
2025-06-10 21:31:06,919 - services.gemini_service - INFO - Gemini api key :AIzaSyCggp87Qc8fLuYovaPQe56scn8EHOvhWJk
2025-06-10 21:31:06,934 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.8:5000
2025-06-10 21:31:06,934 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-10 21:31:11,850 - services.auth_service - INFO - Starting user registration for email: test3@example.com
2025-06-10 21:31:11,872 - services.auth_service - WARNING - Registration attempted with existing email: test3@example.com
2025-06-10 21:31:11,872 - services.auth_service - WARNING - Registration validation error: User with this email already exists
2025-06-10 21:31:11,872 - routes.auth_routes - WARNING - Registration value error: User with this email already exists
2025-06-10 21:31:11,873 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 21:31:11] "[31m[1mPOST /api/auth/register HTTP/1.1[0m" 400 -
2025-06-10 21:31:17,272 - services.auth_service - WARNING - Login validation error: Invalid email or password
2025-06-10 21:31:17,272 - routes.auth_routes - WARNING - Login value error: Invalid email or password
2025-06-10 21:31:17,273 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 21:31:17] "[31m[1mPOST /api/auth/login HTTP/1.1[0m" 401 -
2025-06-10 21:31:57,655 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 21:31:57] "POST /api/auth/login HTTP/1.1" 200 -
